<html>
	<head>
		<meta charset="utf-8"/>
		<script src="wasm_exec.js"></script>
		<script>
			const go = new Go();
			let mod,
				inst;
			WebAssembly
				.instantiateStreaming(fetch("main.wasm"), go.importObject)
				.then(async result => {
					mod = result.module;
					inst = result.instance;
					await go.run(inst);
				});

			function nextJobPP() {
				return new Promise((resolve, reject) => {
					nextJobPromise((err, message) => {
						if (err) {
							console.log("rejecting with error:", err);
							reject(err);
							return;
						}
						console.log("resolving with mssage:", message);
						resolve(message);
					});
				});
			}
		</script>
	</head>
	<body></body>
</html>